!function(g){g.fn.listnav=function(e){var C=g.extend({},g.fn.listnav.defaults,e),m=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],N=!1,p="";return p=null!==document.ontouchstart?"click":"touchend click",C.prefixes=g.map(C.prefixes,function(e){return e.toLowerCase()}),this.each(function(){var i,n,l,s,a,o,e=this.id,d=g(this),r={},c=0,u=!0,v="";function h(e,t,i){/\W/.test(e)&&(e="-"),isNaN(e)||(e="_"),t.addClass("ln-"+e),void 0===r[e]&&(r[e]=0),r[e]++,i||c++}function f(e){return g(e).hasClass("all")?C.dontCount?c-d.find(C.dontCount).length:c:(e=".ln-"+g(e).attr("class").split(" ")[0],void 0!==(o=C.dontCount?d.find(e).not(C.dontCount).length:d.find(e).length)?o:0)}g("#"+e+"-nav").length||g('<div id="'+e+'-nav" class="listNav"/>').insertBefore(d),i=g("#"+e+"-nav"),function(){if(i.append(function(){for(var e=[],t=1;t<m.length;t++)0===e.length&&e.push('<a class="all" href="#">'+C.allText+'</a><a class="_" href="#">0-9</a>'),e.push('<a class="'+m[t]+'" href="#">'+("-"===m[t]?"...":m[t].toUpperCase())+"</a>");return'<div class="ln-letters">'+e.join("")+"</div>"+(C.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}()),n=g(".ln-letters",i).slice(0,1),C.showCounts&&(l=g(".ln-letter-count",i).slice(0,1)),function(){var l,n,s=0<C.prefixes.length,a=0<C.filterSelector.length;g(d).children().each(function(){if(n=g(this),""!==(l=a?g.trim(n.find(C.filterSelector).text()).toLowerCase():g.trim(n.text()).toLowerCase())){if(s){var e=g.map(C.prefixes,function(e){return e.indexOf(" ")<=0?e+" ":e}),t=g.grep(e,function(e){return 0===l.indexOf(e)});if(0<t.length){var i=l.toLowerCase().split(t[0])[1];return void h(null!==i?g.trim(i).charAt(0):l.charAt(0),n,!0)}}h(l.charAt(0),n)}})}(),d.append('<li class="ln-no-match listNavHide">'+C.noMatchText+"</li>"),function(){C.showCounts&&(i.mouseover(function(){!function(){var e=l.outerHeight();l.css({top:g("a:first",i).slice(0,1).position().top-e})}()}),g(".ln-letters a",i).mouseover(function(){s=g(this).position().left,a=g(this).outerWidth()+"px",o=f(this),l.css({left:s,width:a}).text(o).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){l.addClass("listNavHide").removeClass("letterCountShow")}));g("a",n).on(p,function(e){e.preventDefault();var t=g(this),i=t.attr("class").split(" ")[0],l=d.children(".ln-no-match");if(C.initHidden&&d.children(".ln-init-hidden").remove(),v!==i){if(g("a.ln-selected",n).removeClass("ln-selected"),"all"===i)d.children().addClass("listNavShow").removeClass("listNavHide"),l.addClass("listNavHide").removeClass("listNavShow"),u=!0;else u?(d.children().addClass("listNavHide").removeClass("listNavShow"),u=!1):""!==v&&d.children(".ln-"+v).addClass("listNavHide").removeClass("listNavShow"),0<f(this)?(d.children(".ln-"+i).addClass("listNavShow").removeClass("listNavHide"),l.addClass("listNavHide").removeClass("listNavShow")):l.addClass("listNavShow").removeClass("listNavHide");v=i,g.cookie&&null!==C.cookieName&&g.cookie(C.cookieName,i,{expires:999}),t.addClass("ln-selected"),t.blur(),N||null===C.onClick?N=!1:C.onClick(i)}void 0!==C.onAfterFilter&&C.onAfterFilter(i)})}(),C.flagDisabled&&function(){for(var e=0;e<m.length;e++)void 0===r[m[e]]&&g("."+m[e],n).addClass("ln-disabled")}(),C.includeAll||g(".all",n).remove(),C.includeNums||g("._",n).remove(),C.includeOther||g(".-",n).remove(),C.removeDisabled&&g(".ln-disabled",n).remove(),g(":last",n).addClass("ln-last"),g.cookie&&null!==C.cookieName){var e=g.cookie(C.cookieName);null!=e&&(C.initLetter=e)}if(""!==C.initLetter)N=!0,g("."+C.initLetter.toLowerCase(),n).slice(0,1).trigger("click");else if(C.initHidden)d.append('<li class="ln-init-hidden listNavHide">'+C.initHiddenText+"</li>"),d.children().addClass("listNavHide"),d.children(".ln-init-hidden").removeClass("listNavHide");else if(C.includeAll)g(".all",n).addClass("ln-selected");else for(var t=C.includeNums?0:1;t<m.length;t++)if(0<r[m[t]]){N=!0,g("."+m[t],n).slice(0,1).trigger("click");break}}()})},g.fn.listnav.defaults={initHidden:!1,initHiddenText:"Tap a letter above to view matching items",initLetter:"",includeAll:!0,allText:"All",includeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,dontCount:"",cookieName:null,onClick:null,prefixes:[],filterSelector:"",onAfterFilter:null}}(jQuery);